{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/utils/emoji-utils.js","../src/utils/input-event-utils.js","../src/hooks/use-sanitize.js","../src/hooks/use-expose.js","../src/hooks/use-emit.js","../src/text-input.js","../src/components/emoji-picker-button.js","../node_modules/@emoji-mart/react/dist/module.js","../src/components/emoji-picker.js","../src/components/emoji-picker-container.js","../src/components/emoji-picker-wrapper.js","../src/utils/mention-utils.js","../src/hooks/use-mention.js","../src/components/mention-user-list.js","../src/components/mention-wrapper.js","../src/utils/observer.js","../src/hooks/use-event-listeners.js","../src/hooks/user-pollute.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/* eslint-disable valid-jsdoc */\n// @ts-check\n\nexport const TRANSPARENT_GIF =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\nexport const EMOJI_STYLE = \"\";\n\n/**\n * Replace all text with emoji with an image html tag\n * @param {string} text\n * @return {string}\n */\nexport function replaceAllTextEmojis(text) {\n  let allEmojis = getAllEmojisFromText(text);\n\n  if (allEmojis) {\n    allEmojis = [...new Set(allEmojis)]; // remove duplicates\n\n    allEmojis.forEach(emoji => {\n      text = replaceAll(text, emoji, getInputEmojiHTML('', emoji));\n    });\n  }\n\n  return text;\n}\n\n/**\n * Replace all occurrencies in a string\n * @param {string} str\n * @param {string} find\n * @param {string} replace\n * @return {string}\n */\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(find, \"g\"), replace);\n}\n\n/**\n * Get all emojis from the text\n * @param {string} text\n * @return {string[]}\n */\nfunction getAllEmojisFromText(text) {\n  return text.match(\n    /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\n  );\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param { import(\"../types/types\").EmojiMartItem } emoji\n * @return {string}\n */\nexport function getImageEmoji(emoji) {\n  /** @type {HTMLElement | null} */\n  const emojiPickerEl = document.querySelector('em-emoji-picker')\n\n  if (!emojiPickerEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  /** @type {HTMLSpanElement | null=} */\n  const emojiSpanEl = emojiPickerEl?.shadowRoot?.querySelector(`[title=\"${emoji.name}\"] > span > span`)\n\n  if (!emojiSpanEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  const style = replaceAll(emojiSpanEl.style.cssText, '\"', \"'\");\n\n  return getInputEmojiHTML(style, emoji.native);\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {string} style\n * @param {string} emoji\n * @returns\n */\nfunction getInputEmojiHTML(style, emoji) {\n  return `<img style=\"${style}; display: inline-block\" data-emoji=\"${emoji}\" src=\"${TRANSPARENT_GIF}\" />`;\n}\n\n/**\n * \n * @param {string} emoji \n * @returns \n */\nfunction getInputEmojiNativeHTML(emoji) {\n  return `<span class=\"width: 18px; height: 18px; display: inline-block; margin: 0 1px;\">${emoji}</span>`;\n}\n\n/**\n *\n * @param {string} html\n * @return {string}\n */\nexport function replaceAllTextEmojiToString(html) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach(image => {\n    container.innerHTML = container.innerHTML.replace(\n      image.outerHTML,\n      image.dataset.emoji\n    );\n  });\n\n  return container.innerHTML;\n}\n","// @ts-check\n\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString,\n} from \"./emoji-utils\";\n\n/**\n * Handle copy of current selected text\n * @param {React.ClipboardEvent} event\n */\nexport function handleCopy(event) {\n  const selectedText = window.getSelection();\n\n  if (selectedText === null) {\n    return;\n  }\n\n  let container = document.createElement(\"div\");\n\n  for (let i = 0, len = selectedText.rangeCount; i < len; ++i) {\n    container.appendChild(selectedText.getRangeAt(i).cloneContents());\n  }\n\n  container = replaceEmojiToString(container);\n\n  event.clipboardData.setData(\"text\", container.innerText);\n  event.preventDefault();\n}\n\n/**\n *\n * @param {string} html\n */\nexport function handlePasteHtmlAtCaret(html) {\n  let sel;\n  let range;\n  if (window.getSelection) {\n    // IE9 and non-IE\n    sel = window.getSelection();\n\n    if (sel === null) return;\n\n    if (sel.getRangeAt && sel.rangeCount) {\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n\n      // Range.createContextualFragment() would be useful here but is\n      // non-standard and not supported in all browsers (IE9, for one)\n      const el = document.createElement(\"div\");\n      el.innerHTML = html;\n      const frag = document.createDocumentFragment();\n      let node;\n      let lastNode;\n      while ((node = el.firstChild)) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n\n      // Preserve the selection\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }\n}\n\n/**\n * Replace emoji img to its string value\n * @param {HTMLDivElement} container\n * @return {HTMLDivElement}\n */\nfunction replaceEmojiToString(container) {\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach((image) => {\n    image.outerHTML = image.dataset.emoji;\n  });\n\n  return container;\n}\n\n/**\n * Handle past on input\n * @param {React.ClipboardEvent} event\n */\nexport function handlePaste(event) {\n  event.preventDefault();\n  let content;\n  if (event.clipboardData) {\n    content = event.clipboardData.getData(\"text/plain\");\n    content = replaceAllTextEmojis(content);\n    document.execCommand(\"insertHTML\", false, content);\n  }\n}\n\n/**\n * @typedef {object} HandleKeyDownOptions\n * @property {HTMLDivElement} placeholderEl\n * @property {number} maxLength\n * @property {HTMLDivElement} inputEl\n * @property {React.MutableRefObject<string>} cleanedTextRef\n * @property {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @property {boolean} cleanOnEnter\n * @property {function(): void} emitChange\n * @property {(function(string): void)=} onEnter\n * @property {(function(KeyboardEvent): void)=} onKeyDown\n * @property {(function(string): void)} updateHTML\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @typedef {Object} HandleSelectEmojiProps\n * @property {import(\"../types/types\").EmojiMartItem} emoji\n * @property {React.MutableRefObject<import('../text-input').Ref>} textInputRef\n * @property {boolean} keepOpened\n * @property {() => void} toggleShowPicker\n * @property {number=} maxLength\n */\n\n/**\n *\n * @param {HandleSelectEmojiProps} props\n */\nexport function handleSelectEmoji({\n  emoji,\n  textInputRef,\n  keepOpened,\n  toggleShowPicker,\n  maxLength,\n}) {\n  if (\n    typeof maxLength !== \"undefined\" &&\n    totalCharacters(textInputRef.current) >= maxLength\n  ) {\n    return;\n  }\n\n  textInputRef.current.appendContent(getImageEmoji(emoji));\n\n  if (!keepOpened) {\n    toggleShowPicker();\n  }\n}\n\n/**\n *\n * @param {{text: string, html: string}} props\n * @return {number}\n */\nexport function totalCharacters({ text, html }) {\n  const textCount = text.length;\n  const emojisCount = (html.match(/<img/g) || []).length;\n\n  return textCount + emojisCount;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Handle keyup event\n * @param {() => void} emitChange\n * @param {(event: KeyboardEvent) => void} onKeyDownMention\n * @param {React.MutableRefObject<string>} cleanedTextRef\n * @param {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @return {(event: KeyboardEvent) => void}\n */\nexport function handleKeyup(\n  emitChange,\n  onKeyDownMention,\n  cleanedTextRef,\n  textInputRef,\n) {\n  return (event) => {\n    const text = replaceAllTextEmojiToString(textInputRef.current.innerHTML);\n    cleanedTextRef.current = text;\n    emitChange();\n    onKeyDownMention(event);\n  };\n}\n\n/**\n * Handle focus event\n * @param {function(FocusEvent): void} onFocus\n * @return {function(FocusEvent): void}\n */\nexport function handleFocus(onFocus) {\n  return (event) => {\n    onFocus(event);\n  };\n}\n\n/**\n * Set caret to the end of text value\n * @param {React.MutableRefObject<HTMLDivElement| null>} input\n */\nexport function moveCaretToEnd(input) {\n  let range;\n  let selection;\n  if (document.createRange && input.current) {\n    range = document.createRange();\n    range.selectNodeContents(input.current);\n    range.collapse(false);\n    selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n}\n/**\n *\n * @param {HTMLDivElement} inputDiv\n * @return {string}\n */\nexport function removeHtmlExceptBr(inputDiv) {\n  const temp = inputDiv.innerHTML.replace(/<br\\s*\\/?>/gi, \"[BR]\"); // temporarily replace <br> with placeholder\n  const stripped = temp.replace(/<[^>]+>/g, \"\"); // strip all html tags\n  const final = stripped.replace(/\\[BR\\]/gi, \"</br>\"); // replace placeholders with <br>\n  return final;\n}\n\n/**\n * \n * @param {*} range \n * @returns \n */\nexport function getSelectionStart(range) {\n  let node = range.startContainer;\n  let offset = range.startOffset;\n\n  // Handle cases where the selection start node is not a text node\n  if (node.nodeType !== Node.TEXT_NODE) {\n    while (node.nodeType !== Node.TEXT_NODE) {\n      node = node.nextSibling;\n      if (!node) break;\n    }\n    if (!node) {\n      node = range.commonAncestorContainer;\n      while (node.nodeType !== Node.TEXT_NODE) {\n        node = node.firstChild;\n      }\n    }\n    offset = 0;\n  }\n\n  return { node, offset };\n}\n\n/**\n * \n * @returns {Object} cursor\n */\nexport function getCursor() {\n  const selection = window.getSelection();\n  const range = selection.getRangeAt(0);\n  const selectionStart = getSelectionStart(range);\n\n  return  {selection, range, selectionStart}\n}\n\n/**\n *\n */\nexport function addLineBreak() {\n  const { selection, range, selectionStart } = getCursor()\n\n  // If cursor is at the end of the text content, add one more line break\n  if (\n    selection.isCollapsed &&\n    selectionStart.offset === selectionStart.node.textContent.length\n  ) {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    const br2 = document.createElement(\"br\");\n    range.insertNode(br2);\n    range.setStartAfter(br2);\n    range.setEndAfter(br2);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  } else {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n    // Set cursor position right before the first letter after the line break\n    if (\n      selectionStart.node.nextSibling &&\n      selectionStart.node.nextSibling.nodeType === Node.TEXT_NODE\n    ) {\n      range.setStart(selectionStart.node.nextSibling, 1);\n      range.setEnd(selectionStart.node.nextSibling, 1);\n    }\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n","// @ts-check\n\nimport { useCallback, useRef } from \"react\";\nimport { removeHtmlExceptBr } from \"../utils/input-event-utils\";\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @param {boolean} shouldReturn\n */\nexport function useSanitize(shouldReturn) {\n  /** @type {React.MutableRefObject<SanitizeFn[]>} */\n  const sanitizeFnsRef = useRef([]);\n\n  const sanitizedTextRef = useRef(\"\");\n\n  /** @type {(fn: SanitizeFn) => void} */\n  const addSanitizeFn = useCallback(fn => {\n    sanitizeFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const sanitize = useCallback(html => {\n    let result = sanitizeFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, html);\n\n    result = replaceAllHtmlToString(result, shouldReturn);\n\n    sanitizedTextRef.current = result;\n\n    return result;\n  }, []);\n\n  return { addSanitizeFn, sanitize, sanitizedTextRef };\n}\n\n/**\n *\n * @param {string} html\n * @param {boolean} shouldReturn\n * @return {string}\n */\nexport function replaceAllHtmlToString(html, shouldReturn) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n  let text\n  if(shouldReturn) {\n    text = removeHtmlExceptBr(container)\n  } else {\n    text = container.innerText || \"\";\n  }\n\n  // remove all ↵ for safari\n  text = text.replace(/\\n/gi, \"\");\n\n  return text;\n}\n","// @ts-check\n\nimport { useImperativeHandle } from \"react\";\nimport { useSanitize } from \"./use-sanitize\";\n\n/**\n * @typedef {Object} Props\n * @property {React.Ref<any>} ref\n * @property {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @property {(value: string) => void} setValue\n * @property {() => void} emitChange\n */\n\n/**\n *\n * @param {Props} props\n */\nexport function useExpose({ ref, textInputRef, setValue, emitChange }) {\n  const { sanitize, sanitizedTextRef } = useSanitize(false);\n\n  useImperativeHandle(ref, () => ({\n    get value() {\n      return sanitizedTextRef.current;\n    },\n    set value(value) {\n      setValue(value);\n    },\n    focus: () => {\n      if (textInputRef.current === null) return\n      textInputRef.current.focus();\n    },\n    blur: () => {\n      if (textInputRef.current !== null) {\n        sanitize(textInputRef.current.html);\n\n      }\n\n      emitChange();\n    }\n  }));\n}\n","// @ts-check\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * useEmit\n * @param {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @param {(size: {width: number, height: number}) => void} onResize\n * @param {(text: string) => void} onChange\n */\nexport function useEmit(textInputRef, onResize, onChange) {\n  /** @type {React.MutableRefObject<{width: number; height: number} | null>} */\n  const currentSizeRef = useRef(null);\n  const onChangeFn = useRef(onChange);\n\n  const checkAndEmitResize = useCallback(() => {\n    if (textInputRef.current !== null) {\n      const currentSize = currentSizeRef.current;\n\n      const nextSize = textInputRef.current.size;\n\n      if (\n        (!currentSize ||\n          currentSize.width !== nextSize.width ||\n          currentSize.height !== nextSize.height) &&\n        typeof onResize === \"function\"\n      ) {\n        onResize(nextSize);\n      }\n\n      currentSizeRef.current = nextSize;\n    }\n  }, [onResize, textInputRef]);\n\n  const emitChange = useCallback((sanitizedText) => {\n    if (typeof onChangeFn.current === \"function\") {\n      onChangeFn.current(sanitizedText);\n    }\n\n    if (typeof onResize === \"function\") {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, onResize]);\n\n  useEffect(() => {\n    if (textInputRef.current) {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, textInputRef]);\n\n  return emitChange;\n}\n","// @ts-check\n// vendors\nimport React, { useImperativeHandle, forwardRef, useRef } from \"react\";\nimport { addLineBreak, handlePasteHtmlAtCaret } from \"./utils/input-event-utils\";\nimport { replaceAllTextEmojiToString } from \"./utils/emoji-utils\";\n\n/**\n * @typedef {Object} Props\n * @property {(event: React.KeyboardEvent) => void} onKeyDown\n * @property {(event: React.KeyboardEvent) => void} onKeyUp\n * @property {() => void} onFocus\n * @property {() => void} onBlur\n * @property {(sanitizedText: string) => void=} onChange\n * @property {(event: React.KeyboardEvent) => void} onArrowUp\n * @property {(event: React.KeyboardEvent) => void} onArrowDown\n * @property {(event: React.KeyboardEvent) => void} onEnter\n * @property {boolean} shouldReturn\n * @property {(event: React.ClipboardEvent) => void} onCopy\n * @property {(event: React.ClipboardEvent) => void} onPaste\n * @property {string} placeholder\n * @property {React.CSSProperties} style\n * @property {number} tabIndex\n * @property {string} className\n * @property {(html: string) => void} onChange\n */\n\n/**\n * @typedef {{\n *  appendContent: (html: string) => void;\n *  html: string;\n *  text: string;\n *  size: { width: number; height: number;};\n *  focus: () => void;\n * }} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst TextInput = (\n  { placeholder, style, tabIndex, className, onChange, ...props },\n  ref\n) => {\n  useImperativeHandle(ref, () => ({\n    appendContent: html => {\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      handlePasteHtmlAtCaret(html);\n\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      if (textInputRef.current && placeholderRef.current && replaceAllTextEmojiToString(textInputRef.current.innerHTML) === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else if (placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n\n      if (textInputRef.current && typeof onChange === 'function') {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    set html(value) {\n      if (textInputRef.current) {\n        textInputRef.current.innerHTML = value;\n      }\n      \n      if (placeholderRef.current) {\n        const text = replaceAllTextEmojiToString(value)\n        if (text === \"\") {\n          placeholderRef.current.style.visibility = \"visible\";\n        } else {\n          placeholderRef.current.style.visibility = \"hidden\";\n        }\n      }\n\n      if (typeof onChange === 'function' && textInputRef.current) {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    get html() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerHTML;\n    },\n    get text() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerText;\n    },\n    get size() {\n      if (!textInputRef.current) {\n        return {\n          width: 0,\n          height: 0\n        }\n      }\n\n      return {\n        width: textInputRef.current.offsetWidth,\n        height: textInputRef.current.offsetHeight\n      };\n    },\n    focus() {\n      if (!textInputRef.current) return\n\n      textInputRef.current.focus();\n    }\n  }));\n\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const placeholderRef = useRef(null);\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const textInputRef = useRef(null);\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyDown(event) {    \n    if (event.key === \"Enter\" && (event.shiftKey === true || event.ctrlKey === true) && props.shouldReturn) {\n      event.preventDefault();\n      if(textInputRef.current) {\n        addLineBreak()\n        return;\n      }\n    } \n    if (event.key === \"Enter\") {\n      props.onEnter(event);\n    } else if (event.key === \"ArrowUp\") {\n      props.onArrowUp(event);\n    } else if (event.key === \"ArrowDown\") {\n      props.onArrowDown(event);\n    } else {\n      if (event.key.length === 1 && placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    props.onKeyDown(event);\n  }\n\n  /** */\n  function handleClick() {\n    props.onFocus();\n  }\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyUp(event) {\n    props.onKeyUp(event);\n\n    const input = textInputRef.current;\n\n    if (placeholderRef.current && input) {\n      const text = replaceAllTextEmojiToString(input.innerHTML)\n      if (text === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    if (typeof onChange === 'function' && textInputRef.current) {\n      onChange(textInputRef.current.innerHTML);\n    }\n  }\n\n  return (\n    <div className=\"react-input-emoji--container\" style={style}>\n      <div className=\"react-input-emoji--wrapper\" onClick={handleClick}>\n        <div ref={placeholderRef} className=\"react-input-emoji--placeholder\">\n          {placeholder}\n        </div>\n        <div\n          ref={textInputRef}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n          tabIndex={tabIndex}\n          contentEditable\n          className={`react-input-emoji--input${className ? ` ${className}` : \"\"\n            }`}\n          onBlur={props.onBlur}\n          onCopy={props.onCopy}\n          onPaste={props.onPaste}\n          data-testid=\"react-input-emoji--input\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TextInputWithRef = forwardRef(TextInput);\n\nexport default TextInputWithRef;\n","// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {(event: React.MouseEvent) => void} toggleShowPicker\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerButton({ showPicker, toggleShowPicker, buttonElement, buttonRef }) {\n  \n  const localButtonRef = useRef(null);\n  const [showCustomButtonContent, setShowCustomButtonContent] = useState(false);\n\n  useEffect(() => {\n    if ((buttonRef?.current?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonRef.current.childNodes[0]);\n      setShowCustomButtonContent(true);\n    } else if ((buttonElement?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonElement?.childNodes[0]);\n      setShowCustomButtonContent(true);\n    }\n  }, [buttonElement?.childNodes]);\n\n  return (\n    <button\n      ref={localButtonRef}\n      type=\"button\"\n      className={`react-input-emoji--button${\n        showPicker ? \" react-input-emoji--button__show\" : \"\"\n      }`}\n      onClick={toggleShowPicker}\n    >\n      {!showCustomButtonContent && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n          className=\"react-input-emoji--button--icon\"\n        >\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\" />\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n\nexport default EmojiPickerButton;\n","import $dvPge$react, {useRef as $dvPge$useRef, useEffect as $dvPge$useEffect} from \"react\";\nimport {Picker as $dvPge$Picker} from \"emoji-mart\";\n\n\n\nfunction $e5534fc185f7111e$export$2e2bcd8739ae039(props) {\n    const ref = (0, $dvPge$useRef)(null);\n    const instance = (0, $dvPge$useRef)(null);\n    if (instance.current) instance.current.update(props);\n    (0, $dvPge$useEffect)(()=>{\n        instance.current = new (0, $dvPge$Picker)({\n            ...props,\n            ref: ref\n        });\n        return ()=>{\n            instance.current = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0, $dvPge$react).createElement(\"div\", {\n        ref: ref\n    });\n}\n\n\nexport {$e5534fc185f7111e$export$2e2bcd8739ae039 as default};\n//# sourceMappingURL=module.js.map\n","// vendors\nimport React, { memo, useMemo } from \"react\";\nimport Picker from \"@emoji-mart/react\";\n\n/**\n * @typedef {object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {function(import(\"../types/types\").EmojiMartItem): void} onSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Component\n * @param {Props} props\n */\nfunction EmojiPicker(props) {\n  const { theme, onSelectEmoji, disableRecent, customEmojis, language } = props;\n\n  /** @type {string[]} */\n  const categories = useMemo(() => {\n    /** @type {string[]} */\n    let categoryies = [];\n\n    if (!disableRecent) {\n      categoryies.push(\"frequent\");\n    }\n\n    categoryies = [\n      ...categoryies,\n      \"people\",\n      \"nature\",\n      \"foods\",\n      \"activity\",\n      \"places\",\n      \"objects\",\n      \"symbols\",\n      \"flags\"\n    ];\n\n    return categoryies;\n  }, [disableRecent]);\n\n  const i18n = useMemo(() => {\n    if (!language) {\n      return undefined\n    }\n\n    return require(`@emoji-mart/data/i18n/${language ?? 'en'}.json`)\n  }, [language])\n\n  return (\n    <Picker\n      data={undefined}\n      theme={theme}\n      previewPosition=\"none\"\n      onEmojiSelect={onSelectEmoji}\n      custom={customEmojis}\n      categories={categories}\n      set=\"apple\"\n      i18n={i18n}\n    />\n  );\n}\n\n\nexport default memo(EmojiPicker);\n","import React from \"react\";\nimport EmojiPicker from \"./emoji-picker\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {(emoji: import(\"../types/types\").EmojiMartItem) => void} handleSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {('above' | 'below')=} position\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerContainer({\n  showPicker,\n  theme,\n  handleSelectEmoji,\n  disableRecent,\n  customEmojis,\n  position,\n  language\n}) {\n  return (\n    <div className=\"react-emoji-picker--container\">\n      {showPicker && (\n        <div\n          className=\"react-emoji-picker--wrapper\"\n          onClick={evt => evt.stopPropagation()}\n          style={position === 'below' ? {top: '40px'} : {}}\n        >\n          <div className=\"react-emoji-picker\">\n            <EmojiPicker\n              theme={theme}\n              onSelectEmoji={handleSelectEmoji}\n              disableRecent={disableRecent}\n              customEmojis={customEmojis}\n              language={language}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EmojiPickerContainer;\n","// @ts-check\n// vendors\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString\n} from \"../utils/emoji-utils\";\n\nimport EmojiPickerButton from \"./emoji-picker-button\";\nimport EmojiPickerContainer from \"./emoji-picker-container\";\n\nconst EMOJI_PICKER_CONTAINER_HEIGHT = 435;\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {boolean} keepOpened\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n * @property {(fn: PolluteFn) => void} addPolluteFn\n * @property {(html: string) => void} appendContent\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n * @property {import('../types/types').Languages=} language\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst EmojiPickerWrapper = props => {\n  const {\n    theme,\n    keepOpened,\n    disableRecent,\n    customEmojis,\n    addSanitizeFn,\n    addPolluteFn,\n    appendContent,\n    buttonElement,\n    buttonRef,\n    language\n  } = props;\n\n  const [showPicker, setShowPicker] = useState(false);\n  /** @type {[HTMLDivElement | undefined, React.Dispatch<React.SetStateAction<HTMLDivElement | undefined>>]} */\n  const [customButton, setCustomButton] = useState();\n  /** @type {['above' | 'below' | undefined, React.Dispatch<React.SetStateAction<'above' | 'below' | undefined>>]} */\n  const [emojiPickerPosition, setEmojiPickerPosition] = useState()\n\n  useEffect(() => {\n    addSanitizeFn(replaceAllTextEmojiToString);\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    addPolluteFn(replaceAllTextEmojis);\n  }, [addPolluteFn]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {MouseEvent} event\n     */\n    function checkClickOutside(event) {\n      /** @type {HTMLElement} */\n      // @ts-ignore\n      const element = event.target;\n\n      if (\n        element.classList.contains(\"react-input-emoji--button\") ||\n        element.classList.contains(\"react-input-emoji--button--icon\")\n      ) {\n        return;\n      }\n\n      setShowPicker(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  /**\n   *\n   * @param {React.MouseEvent} event\n   */\n  function toggleShowPicker(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    setEmojiPickerPosition(calcTopPosition(event))\n\n    setShowPicker(currentShowPicker => !currentShowPicker);\n  }\n\n  /**\n   * \n   * @param {React.MouseEvent} event\n   * @return {'above' | 'below'}\n   */\n  function calcTopPosition(event) {\n    const btn = event.currentTarget\n    const btnRect = btn.getBoundingClientRect();\n\n    const popoverHeight = EMOJI_PICKER_CONTAINER_HEIGHT;\n\n    // Decide to display above or below based on available space\n    if (btnRect.top >= popoverHeight) {\n        // Display above\n        return 'above'\n    } else {\n        // Display below\n        return 'below'\n    }\n  }\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {import(\"../types/types\").EmojiMartItem} emoji\n   */\n  function handleSelectEmoji(emoji) {\n    appendContent(getImageEmoji(emoji));\n\n    if (!keepOpened) {\n      setShowPicker(currentShowPicker => !currentShowPicker);\n    }\n  }\n\n  useEffect(() => {\n    if (buttonRef?.current?.style) {\n      buttonRef.current.style.position = \"relative\";\n      setCustomButton(buttonRef.current);\n    }  else if (buttonElement?.style) {\n      buttonElement.style.position = \"relative\";\n      setCustomButton(buttonElement);\n    }\n  }, [buttonRef, buttonElement]);\n\n  return customButton ? (\n    (ReactDOM.createPortal(\n      <>\n        <EmojiPickerContainer\n          showPicker={showPicker}\n          theme={theme}\n          handleSelectEmoji={handleSelectEmoji}\n          disableRecent={disableRecent}\n          customEmojis={customEmojis}\n          position={emojiPickerPosition}\n          language={language}\n        />\n        <EmojiPickerButton\n          showPicker={showPicker}\n          toggleShowPicker={toggleShowPicker}\n          buttonElement={customButton}\n          buttonRef={buttonRef}\n        />\n      </>,\n      customButton\n    ))\n  ) : (\n    (<>\n      <EmojiPickerContainer\n        showPicker={showPicker}\n        theme={theme}\n        handleSelectEmoji={handleSelectEmoji}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        position={emojiPickerPosition}\n        language={language}\n      />\n      <EmojiPickerButton\n        showPicker={showPicker}\n        toggleShowPicker={toggleShowPicker}\n      />\n    </>)\n  );\n};\n\nexport default EmojiPickerWrapper;\n","// @ts-check\n\n/**\n *\n * @return {string | null}\n */\nexport function getTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return null;\n\n  const text = range.text.substring(range.begin, range.end);\n\n  return text || null;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function deleteTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return;\n\n  // @ts-ignore\n  range.element.deleteData(range.begin, range.end - range.begin);\n}\n\n/**\n *\n * @return {{begin: number, end: number, text: string, element: Node} | null}\n */\nfunction getRangeFromAtToCaret() {\n  const elementWithFocus = getElementWithFocus();\n\n  if (!elementWithFocus) {\n    return null;\n  }\n\n  const { element, caretOffset } = elementWithFocus;\n  const text = element.textContent;\n  const lastAt = text.lastIndexOf(\"@\");\n\n  if (\n    lastAt === -1 ||\n    lastAt >= caretOffset ||\n    (lastAt !== 0 && text[lastAt - 1] !== \" \")\n  ) {\n    return null;\n  }\n\n  return { begin: lastAt, end: caretOffset, text, element };\n}\n\n/**\n *\n * @return {{element: Node, caretOffset: number}}\n */\nexport function getElementWithFocus() {\n  const element = getSelectionStart();\n\n  if (element === null) {\n    return null;\n  }\n\n  let caretOffset = 0;\n  if (typeof window.getSelection != \"undefined\") {\n    const range = window.getSelection().getRangeAt(0);\n    const preCaretRange = range.cloneRange();\n    preCaretRange.selectNodeContents(element);\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\n    caretOffset = preCaretRange.toString().length;\n  } else if (\n    // @ts-ignore\n    typeof document.selection != \"undefined\" &&\n    // @ts-ignore\n    document.selection.type != \"Control\"\n  ) {\n    // @ts-ignore\n    const textRange = document.selection.createRange();\n    // @ts-ignore\n    const preCaretTextRange = document.body.createTextRange();\n    preCaretTextRange.moveToElementText(element);\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n    caretOffset = preCaretTextRange.text.length;\n  }\n\n  return { element, caretOffset };\n}\n\n/**\n *\n * @return {Node | null}\n */\nfunction getSelectionStart() {\n  const node = document.getSelection().anchorNode;\n  return node?.nodeType == 3 ? node : null;\n}\n","// @ts-check\nimport { useCallback, useState } from \"react\";\nimport {\n  deleteTextFromAtToCaret,\n  getElementWithFocus,\n  getTextFromAtToCaret\n} from \"../utils/mention-utils\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {(text: string) => Promise<MentionUser[]>=} searchMention\n * @returns {{mentionSearchText: string | null, mentionUsers: MentionUser[], onKeyUp: (event: React.KeyboardEvent) => void, onFocus: () => void, onSelectUser: () => void, loading: boolean}}\n */\nexport function useMention(searchMention) {\n  const [loading, setLoading] = useState(false);\n\n  /** @type {[MentionUser[], React.Dispatch<React.SetStateAction<MentionUser[]>>]} */\n  const [mentionUsers, setMentionUsers] = useState([]);\n\n  /** @type {[string | null, React.Dispatch<React.SetStateAction<string | null>>]} */\n  const [mentionSearchText, setMentionSearchText] = useState(null);\n\n  const onSelectUser = useCallback(() => {\n    deleteTextFromAtToCaret();\n    setMentionUsers([]);\n  }, []);\n\n  /** */\n  const checkMentionText = useCallback(async () => {\n    const metionText = getTextFromAtToCaret();\n\n    setMentionSearchText(metionText);\n\n    if (metionText === null) {\n      setMentionUsers([]);\n    } else {\n      setLoading(true);\n      const users = await searchMention(metionText);\n      setLoading(false);\n      setMentionUsers(users);\n    }\n  }, [searchMention]);\n\n  /** @type {(event: React.KeyboardEvent) => void} */\n  const onKeyUp = useCallback(\n    async event => {\n      if (typeof searchMention !== \"function\") return;\n\n      if (\n        event.key === \"Backspace\" &&\n        getElementWithFocus()?.element.parentElement.hasAttribute(\n          \"data-mention-id\"\n        )\n      ) {\n        const elementWithFocus = getElementWithFocus();\n        elementWithFocus.element.parentElement.remove();\n      } else if (\n        ![\"ArrowUp\", \"ArrowDown\", \"Esc\", \"Escape\"].includes(event.key)\n      ) {\n        checkMentionText();\n      }\n    },\n    [checkMentionText, searchMention]\n  );\n\n  const onFocus = useCallback(() => {\n    checkMentionText();\n  }, [checkMentionText]);\n\n  return {\n    mentionSearchText,\n    mentionUsers,\n    onKeyUp,\n    onFocus,\n    onSelectUser,\n    loading\n  };\n}\n","// @ts-check\n// vendors\nimport React, {\n  useImperativeHandle,\n  useState,\n  forwardRef,\n  useMemo,\n  useEffect\n} from \"react\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {Object} Props\n * @property {MentionUser[]} users\n * @property {string | null} mentionSearchText\n * @property {(user: MentionUser) => void} onSelect\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n */\n\n/**\n * @typedef {{prevUser: () => void; nextUser: () => void;}} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst MentionUserList = (\n  { users, mentionSearchText, onSelect, addEventListener },\n  ref\n) => {\n  const [selectedUser, setSelectedUser] = useState(0);\n\n  useImperativeHandle(ref, () => ({\n    prevUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === 0) {\n          return 0;\n        }\n\n        return currentSelectedUser - 1;\n      });\n    },\n    nextUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === users.length - 1) {\n          return users.length - 1;\n        }\n\n        return currentSelectedUser + 1;\n      });\n    }\n  }));\n\n  useEffect(() => {\n    setSelectedUser(0);\n  }, [users]);\n\n  /**\n   *\n   * @param {string} selectedText\n   * @param {string} rest\n   * @return {string}\n   */\n  function getMentionSelectedNameEl(selectedText, rest) {\n    return `<span class=\"react-input-emoji--mention--item--name__selected\" data-testid=\"metion-selected-word\">${selectedText}</span>${rest}`;\n  }\n\n  /** @type {(MentionUser & {nameHtml: string})[]} */\n  const usersFiltered = useMemo(() => {\n    const searchText = mentionSearchText\n      ? mentionSearchText.substring(1).toLocaleLowerCase()\n      : \"\";\n    return users.map(user => {\n      let nameHtml = user.name;\n\n      if (mentionSearchText && mentionSearchText.length > 1) {\n        if (user.name.toLowerCase().startsWith(searchText)) {\n          nameHtml = getMentionSelectedNameEl(\n            user.name.substring(0, searchText.length),\n            user.name.substring(searchText.length)\n          );\n        } else {\n          const names = user.name.split(\" \");\n\n          nameHtml = names\n            .map(name => {\n              if (name.toLocaleLowerCase().startsWith(searchText)) {\n                return getMentionSelectedNameEl(\n                  name.substring(0, searchText.length),\n                  name.substring(searchText.length)\n                );\n              }\n              return name;\n            })\n            .join(\" \");\n        }\n      }\n\n      return {\n        ...user,\n        nameHtml\n      };\n    });\n  }, [mentionSearchText, users]);\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {MentionUser} user\n   * @returns {(event: React.MouseEvent) => void} event\n   */\n  function handleClick(user) {\n    return event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onSelect(user);\n    };\n  }\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"enter\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n      onSelect(usersFiltered[selectedUser]);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onSelect, selectedUser, usersFiltered]);\n\n  return (\n    <ul\n      className=\"react-input-emoji--mention--list\"\n      data-testid=\"mention-user-list\"\n    >\n      {usersFiltered.map((user, index) => (\n        <li key={user.id}>\n          <button\n            type=\"button\"\n            onClick={handleClick(user)}\n            className={`react-input-emoji--mention--item${\n              selectedUser === index\n                ? \" react-input-emoji--mention--item__selected\"\n                : \"\"\n            }`}\n            onMouseOver={() => setSelectedUser(index)}\n          >\n            <img\n              className=\"react-input-emoji--mention--item--img\"\n              src={user.image}\n            />\n            <div\n              className=\"react-input-emoji--mention--item--name\"\n              dangerouslySetInnerHTML={{ __html: user.nameHtml }}\n            />\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst MentionUserListWithRef = forwardRef(MentionUserList);\n\nexport default MentionUserListWithRef;\n","// @ts-check\n// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n// hooks\nimport { useMention } from \"../hooks/use-mention\";\n\n// components\nimport MentionUserList from \"./mention-user-list\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n * @property {(html: string) => void} appendContent\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst MentionWrapper = ({\n  searchMention,\n  addEventListener,\n  appendContent,\n  addSanitizeFn\n}) => {\n  /** @type {React.MutableRefObject<import('./mention-user-list').Ref | null>} */\n  const metionUserListRef = useRef(null);\n  const [showUserList, setShowUserList] = useState(false);\n\n  const {\n    mentionSearchText,\n    mentionUsers,\n    loading,\n    onKeyUp,\n    onFocus,\n    onSelectUser\n  } = useMention(searchMention);\n\n  useEffect(() => {\n    addSanitizeFn(html => {\n      const container = document.createElement(\"div\");\n      container.innerHTML = html;\n\n      const mentionsEl = Array.prototype.slice.call(\n        container.querySelectorAll(\".react-input-emoji--mention--text\")\n      );\n\n      mentionsEl.forEach(mentionEl => {\n        container.innerHTML = container.innerHTML.replace(\n          mentionEl.outerHTML,\n          `@[${mentionEl.dataset.mentionName}](userId:${mentionEl.dataset.mentionId})`\n        );\n      });\n\n      return container.innerHTML;\n    });\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    setShowUserList(mentionUsers.length > 0);\n  }, [mentionUsers]);\n\n  useEffect(() => {\n    /** */\n    function checkClickOutside() {\n      setShowUserList(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"keyUp\", onKeyUp);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onKeyUp]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {React.KeyboardEvent} event\n     */\n    function handleKeyDown(event) {\n      switch (event.key) {\n        case \"Esc\": // IE/Edge specific value\n        case \"Escape\":\n          setShowUserList(false);\n          break;\n        default:\n          break;\n      }\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeyDown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener]);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"focus\", onFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onFocus]);\n\n  useEffect(() => {\n    if (showUserList) {\n      const unsubscribeArrowUp = addEventListener(\"arrowUp\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.prevUser();\n      });\n\n      const unsubscribeArrowDown = addEventListener(\"arrowDown\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.nextUser();\n      });\n\n      return () => {\n        unsubscribeArrowUp();\n        unsubscribeArrowDown();\n      };\n    }\n  }, [addEventListener, showUserList]);\n\n  /**\n   *\n   * @param {MetionUser} user\n   */\n  function handleSelect(user) {\n    onSelectUser();\n    appendContent(\n      `<span class=\"react-input-emoji--mention--text\" data-mention-id=\"${user.id}\" data-mention-name=\"${user.name}\">@${user.name}</span> `\n    );\n  }\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"react-input-emoji--mention--container\">\n          <div className=\"react-input-emoji--mention--loading\">\n            <div className=\"react-input-emoji--mention--loading--spinner\">\n              Loading...\n            </div>\n          </div>\n        </div>\n      ) : (\n        showUserList && (\n          <div\n            className=\"react-input-emoji--mention--container\"\n            onClick={evt => evt.stopPropagation()}\n          >\n            <MentionUserList\n              ref={metionUserListRef}\n              mentionSearchText={mentionSearchText}\n              users={mentionUsers}\n              onSelect={handleSelect}\n              addEventListener={addEventListener}\n            />\n          </div>\n        )\n      )}\n    </>\n  );\n};\n\nexport default MentionWrapper;\n","// @ts-check\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @template T\n * @returns {import('../types/types').ListenerObj<T>}\n */\nexport function createObserver() {\n  /** @type {import('../types/types').Listerner<T>[]} */\n  let listeners = [];\n\n  return {\n    subscribe: listener => {\n      listeners.push(listener);\n      return () => {\n        listeners = listeners.filter(l => l !== listener);\n      };\n    },\n    publish: event => {\n      listeners.forEach(listener => listener(event));\n    },\n    get currentListerners() {\n      return listeners;\n    }\n  };\n}\n","// @ts-check\n\nimport { useCallback, useMemo } from \"react\";\nimport { createObserver } from \"../utils/observer\";\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function useEventListeners() {\n  /** @type {TextInputListeners} */\n  const listeners = useMemo(\n    () => ({\n      keyDown: createObserver(),\n      keyUp: createObserver(),\n      arrowUp: createObserver(),\n      arrowDown: createObserver(),\n      enter: createObserver(),\n      focus: createObserver(),\n      blur: createObserver()\n    }),\n    []\n  );\n\n  /**\n   * @template {keyof TextInputListeners} T, K\n   * @type {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void}\n   */\n  const addEventListener = useCallback(\n    (event, fn) => {\n      return listeners[event].subscribe(fn);\n    },\n    [listeners]\n  );\n\n  return { addEventListener, listeners };\n}\n","// @ts-check\n\nimport { useCallback, useRef } from \"react\";\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function usePollute() {\n  /** @type {React.MutableRefObject<PolluteFn[]>} */\n  const polluteFnsRef = useRef([]);\n\n  /** @type {(fn: PolluteFn) => void} */\n  const addPolluteFn = useCallback(fn => {\n    polluteFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const pollute = useCallback(text => {\n    const result = polluteFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, text);\n\n    return result;\n  }, []);\n\n  return { addPolluteFn, pollute };\n}\n","// @ts-check\n// vendors\nimport React, { useEffect, useRef, forwardRef, useCallback } from \"react\";\n\n// css\nimport \"./styles.css\";\n\n// utils\nimport { replaceAllTextEmojis } from \"./utils/emoji-utils\";\nimport { handleCopy, totalCharacters } from \"./utils/input-event-utils\";\n\n// hooks\nimport { useExpose } from \"./hooks/use-expose\";\nimport { useEmit } from \"./hooks/use-emit\";\n\n// components\nimport TextInput from \"./text-input\";\nimport EmojiPickerWrapper from \"./components/emoji-picker-wrapper\";\nimport MentionWrapper from \"./components/mention-wrapper\";\nimport { useEventListeners } from \"./hooks/use-event-listeners\";\nimport { useSanitize } from \"./hooks/use-sanitize\";\nimport { usePollute } from \"./hooks/user-pollute\";\n\n/**\n * @typedef {import('./types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('./types/types').ListenerObj<any>} ListenerObj\n */\n\n/**\n * @typedef {object} Props\n * @property {string} value\n * @property {(value: string) => void} onChange\n * @property {\"light\" | \"dark\" | \"auto\"=} theme\n * @property {boolean=} cleanOnEnter\n * @property {(text: string) => void=} onEnter\n * @property {string=} placeholder\n * @property {(size: {width: number, height: number}) => void=} onResize\n * @property {() => void=} onClick\n * @property {() => void=} onFocus\n * @property {() => void=} onBlur\n * @property {boolean=} shouldReturn\n * @property {number=} maxLength\n * @property {boolean=} keepOpened\n * @property {(event: KeyboardEvent) => void=} onKeyDown\n * @property {string=} inputClass\n * @property {boolean=} disableRecent\n * @property {number=} tabIndex\n * @property {number=} height\n * @property {number=} borderRadius\n * @property {string=} borderColor\n * @property {number=} fontSize\n * @property {string=} fontFamily\n * @property {{id: string; name: string; emojis: {id: string; name: string; keywords: string[], skins: {src: string}[]}}[]=} customEmojis\n * @property {import('./types/types').Languages=} language\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Input Emoji Component\n * @param {Props} props\n * @param {React.Ref<any>} ref\n * @return {JSX.Element}\n */\nfunction InputEmoji(props, ref) {\n  const {\n    onChange,\n    onEnter,\n    shouldReturn,\n    onResize,\n    onClick,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    theme,\n    cleanOnEnter,\n    placeholder,\n    maxLength,\n    keepOpened,\n    inputClass,\n    disableRecent,\n    tabIndex,\n    value,\n    customEmojis,\n    language,\n    searchMention,\n    buttonElement,\n    buttonRef,\n    // style\n    borderRadius,\n    borderColor,\n    fontSize,\n    fontFamily,\n  } = props;\n\n  /** @type {React.MutableRefObject<import('./text-input').Ref | null>} */\n  const textInputRef = useRef(null);\n\n  const { addEventListener, listeners } = useEventListeners();\n\n  const { addSanitizeFn, sanitize, sanitizedTextRef } = useSanitize(props.shouldReturn);\n\n  const { addPolluteFn, pollute } = usePollute();\n\n  const updateHTML = useCallback(\n    (nextValue = \"\") => {\n      if (textInputRef.current === null) return;\n\n      textInputRef.current.html = replaceAllTextEmojis(nextValue);\n      sanitizedTextRef.current = nextValue;\n    },\n    [sanitizedTextRef]\n  );\n\n  const setValue = useCallback(\n    /**\n     * \n     * @param {string} value\n     */\n    (value) => {\n      updateHTML(value);\n    },\n    [updateHTML]\n  );\n\n  const emitChange = useEmit(textInputRef, onResize, onChange);\n\n  useExpose({\n    ref,\n    setValue,\n    textInputRef,\n    emitChange\n  });\n\n  useEffect(() => {\n    if (sanitizedTextRef.current !== value) {\n      setValue(value);\n    }\n  }, [sanitizedTextRef, setValue, value]);\n\n  // useEffect(() => {\n  //   updateHTML();\n  // }, [updateHTML]);\n\n  useEffect(() => {\n    /**\n     * Handle keydown event\n     * @param {React.KeyboardEvent} event\n     * @return {boolean}\n     */\n    function handleKeydown(event) {\n      if (\n        typeof maxLength !== \"undefined\" &&\n        event.key !== \"Backspace\" &&\n        textInputRef.current !== null &&\n        totalCharacters(textInputRef.current) >= maxLength\n      ) {\n        event.preventDefault();\n      }\n\n      if (event.key === \"Enter\" && textInputRef.current) {\n        event.preventDefault();\n\n        const text = sanitize(textInputRef.current.html);\n\n        emitChange(sanitizedTextRef.current);\n\n        if (\n          typeof onEnter === \"function\" &&\n          listeners.enter.currentListerners.length === 0\n        ) {\n          onEnter(text);\n        }\n\n        if (cleanOnEnter && listeners.enter.currentListerners.length === 0) {\n          updateHTML(\"\");\n        }\n\n        if (typeof onKeyDown === \"function\") {\n          onKeyDown(event.nativeEvent);\n        }\n\n        return false;\n      }\n\n      if (typeof onKeyDown === \"function\") {\n        onKeyDown(event.nativeEvent);\n      }\n\n      return true;\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeydown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [\n    addEventListener,\n    cleanOnEnter,\n    emitChange,\n    listeners.enter.currentListerners.length,\n    maxLength,\n    onEnter,\n    onKeyDown,\n    sanitize,\n    sanitizedTextRef,\n    updateHTML\n  ]);\n\n  useEffect(() => {\n    /** */\n    function handleFocus() {\n      if (typeof onClick === \"function\") {\n        onClick();\n      }\n\n      if (typeof onFocus === \"function\") {\n        onFocus();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"focus\", handleFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onClick, onFocus]);\n\n  useEffect(() => {\n    /** */\n    function handleBlur() {\n      if (typeof onBlur === \"function\") {\n        onBlur();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onBlur]);\n\n  /**\n   *\n   * @param {string} html\n   */\n  function handleTextInputChange(html) {\n    sanitize(html);\n\n    if (value !== sanitizedTextRef.current) {\n      emitChange(sanitizedTextRef.current);\n    }\n  }\n\n  /**\n   *\n   * @param {string} html\n   */\n  function appendContent(html) {\n    if (\n      typeof maxLength !== \"undefined\" &&\n      textInputRef.current !== null &&\n      totalCharacters(textInputRef.current) >= maxLength\n    ) {\n      return;\n    }\n\n    if (textInputRef.current !== null) {\n      textInputRef.current.appendContent(html);\n    }\n  }\n\n  /**\n   * Handle past on input\n   * @param {React.ClipboardEvent} event\n   */\n  function handlePaste(event) {\n    event.preventDefault();\n    let content;\n    if (event.clipboardData) {\n      content = event.clipboardData.getData(\"text/plain\");\n      content = pollute(content);\n      document.execCommand(\"insertHTML\", false, content);\n    }\n  }\n\n  return (\n    <div className=\"react-emoji\">\n      <MentionWrapper\n        searchMention={searchMention}\n        addEventListener={addEventListener}\n        appendContent={appendContent}\n        addSanitizeFn={addSanitizeFn}\n      />\n      <TextInput\n        ref={textInputRef}\n        onCopy={handleCopy}\n        onPaste={handlePaste}\n        shouldReturn={shouldReturn}\n        onBlur={listeners.blur.publish}\n        onFocus={listeners.focus.publish}\n        onArrowUp={listeners.arrowUp.publish}\n        onArrowDown={listeners.arrowDown.publish}\n        onKeyUp={listeners.keyUp.publish}\n        onKeyDown={listeners.keyDown.publish}\n        onEnter={listeners.enter.publish}\n        placeholder={placeholder}\n        style={{\n          borderRadius,\n          borderColor,\n          fontSize,\n          fontFamily\n        }}\n        tabIndex={tabIndex}\n        className={inputClass}\n        onChange={handleTextInputChange}\n      />\n      <EmojiPickerWrapper\n        theme={theme}\n        keepOpened={keepOpened}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        addSanitizeFn={addSanitizeFn}\n        addPolluteFn={addPolluteFn}\n        appendContent={appendContent}\n        buttonElement={buttonElement}\n        buttonRef={buttonRef}\n        language={language}\n      />\n    </div>\n  );\n}\n\nconst InputEmojiWithRef = forwardRef(InputEmoji);\n\nInputEmojiWithRef.defaultProps = {\n  theme: /** @type {const} */ (\"auto\"),\n  height: 30,\n  placeholder: \"Type a message\",\n  borderRadius: 21,\n  borderColor: \"#EAEAEA\",\n  fontSize: 15,\n  fontFamily: \"sans-serif\",\n  tabIndex: 0,\n  shouldReturn: false,\n  customEmojis: [],\n  language: undefined,\n};\n\nexport default InputEmojiWithRef;\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TRANSPARENT_GIF","replaceAllTextEmojis","text","allEmojis","getAllEmojisFromText","_toConsumableArray","Set","forEach","emoji","replaceAll","getInputEmojiHTML","str","find","replace","RegExp","match","getImageEmoji","_emojiPickerEl$shadow","emojiPickerEl","querySelector","getInputEmojiNativeHTML","emojiSpanEl","shadowRoot","concat","name","replaceAllTextEmojiToString","html","container","innerHTML","images","Array","prototype","slice","call","querySelectorAll","image","outerHTML","dataset","handleCopy","event","selectedText","window","getSelection","i","len","rangeCount","getRangeAt","cloneContents","replaceEmojiToString","clipboardData","setData","innerText","preventDefault","handlePasteHtmlAtCaret","sel","range","deleteContents","el","frag","createDocumentFragment","node","lastNode","insertNode","cloneRange","setStartAfter","collapse","removeAllRanges","addRange","totalCharacters","_ref2","textCount","length","emojisCount","removeHtmlExceptBr","inputDiv","temp","stripped","final","getSelectionStart","startContainer","offset","startOffset","nodeType","Node","TEXT_NODE","nextSibling","commonAncestorContainer","getCursor","selection","selectionStart","addLineBreak","_getCursor","isCollapsed","textContent","br","setEndAfter","br2","setStart","setEnd","useSanitize","shouldReturn","sanitizeFnsRef","useRef","sanitizedTextRef","addSanitizeFn","useCallback","fn","current","push","sanitize","result","reduce","acc","replaceAllHtmlToString","useExpose","_ref","textInputRef","setValue","emitChange","_useSanitize","useImperativeHandle","value","focus","blur","useEmit","onResize","onChange","currentSizeRef","onChangeFn","checkAndEmitResize","currentSize","nextSize","size","width","height","sanitizedText","useEffect","TextInput","placeholder","tabIndex","className","props","_objectWithoutProperties","_excluded","appendContent","placeholderRef","visibility","offsetWidth","offsetHeight","handleKeyDown","key","shiftKey","ctrlKey","onEnter","onArrowUp","onArrowDown","onKeyDown","handleClick","onFocus","handleKeyUp","onKeyUp","input","React","onClick","contentEditable","onBlur","onCopy","onPaste","TextInputWithRef","forwardRef","EmojiPickerButton","showPicker","toggleShowPicker","buttonElement","buttonRef","localButtonRef","_useState","useState","_useState2","_slicedToArray","showCustomButtonContent","setShowCustomButtonContent","_buttonRef$current$ch","_buttonRef$current","_buttonElement$childN","_buttonElement$childN2","childNodes","xmlns","viewBox","d","$e5534fc185f7111e$export$2e2bcd8739ae039","$dvPge$useRef","instance","update","$dvPge$useEffect","$dvPge$Picker","$dvPge$react","EmojiPicker","theme","onSelectEmoji","disableRecent","customEmojis","language","categories","useMemo","categoryies","i18n","undefined","require","Picker","data","previewPosition","onEmojiSelect","custom","set","memo","EmojiPickerContainer","handleSelectEmoji","position","evt","stopPropagation","top","EMOJI_PICKER_CONTAINER_HEIGHT","EmojiPickerWrapper","keepOpened","addPolluteFn","setShowPicker","_useState3","_useState4","customButton","setCustomButton","_useState5","_useState6","emojiPickerPosition","setEmojiPickerPosition","checkClickOutside","element","target","classList","contains","addEventListener","removeEventListener","calcTopPosition","currentShowPicker","btn","currentTarget","btnRect","getBoundingClientRect","popoverHeight","ReactDOM","createPortal","Fragment","getTextFromAtToCaret","getRangeFromAtToCaret","substring","begin","end","deleteTextFromAtToCaret","deleteData","elementWithFocus","getElementWithFocus","caretOffset","lastAt","lastIndexOf","preCaretRange","selectNodeContents","endContainer","endOffset","toString","textRange","createRange","preCaretTextRange","body","createTextRange","moveToElementText","setEndPoint","anchorNode","useMention","searchMention","loading","setLoading","mentionUsers","setMentionUsers","mentionSearchText","setMentionSearchText","onSelectUser","checkMentionText","_asyncToGenerator","_regeneratorRuntime","mark","_callee","metionText","users","wrap","_callee$","_context","prev","next","sent","stop","_x","_callee2","_getElementWithFocus","_callee2$","_context2","abrupt","parentElement","hasAttribute","remove","includes","apply","arguments","MentionUserList","onSelect","selectedUser","setSelectedUser","prevUser","currentSelectedUser","nextUser","getMentionSelectedNameEl","rest","usersFiltered","searchText","toLocaleLowerCase","map","user","nameHtml","toLowerCase","startsWith","names","split","join","_objectSpread","unsubscribe","index","id","onMouseOver","src","dangerouslySetInnerHTML","__html","MentionUserListWithRef","MentionWrapper","metionUserListRef","showUserList","setShowUserList","_useMention","mentionsEl","mentionEl","mentionName","mentionId","unsubscribeArrowUp","unsubscribeArrowDown","handleSelect","createObserver","listeners","subscribe","listener","filter","l","publish","currentListerners","useEventListeners","keyDown","keyUp","arrowUp","arrowDown","enter","usePollute","polluteFnsRef","pollute","InputEmoji","cleanOnEnter","maxLength","inputClass","borderRadius","borderColor","fontSize","fontFamily","_useEventListeners","_usePollute","updateHTML","nextValue","handleKeydown","nativeEvent","handleFocus","handleBlur","handleTextInputChange","handlePaste","content","getData","execCommand","InputEmojiWithRef","defaultProps"],"mappings":";;;;;;;;;;AAAA,SAASA,WAAWA,CAACC,GAAG,EAAEC,GAAG,EAAE;EAC7B,IAAKA,GAAG,KAAK,KAAK,CAAC,EAAGA,GAAG,GAAG,EAAE,CAAA;AAC9B,EAAA,IAAIC,QAAQ,GAAGD,GAAG,CAACC,QAAQ,CAAA;AAE3B,EAAA,IAAI,CAACF,GAAG,IAAI,OAAOG,QAAQ,KAAK,WAAW,EAAE;AAAE,IAAA,OAAA;AAAQ,GAAA;AAEvD,EAAA,IAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAI,IAAID,QAAQ,CAACE,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;AACpE,EAAA,IAAIC,KAAK,GAAGH,QAAQ,CAACI,aAAa,CAAC,OAAO,CAAC,CAAA;EAC3CD,KAAK,CAACE,IAAI,GAAG,UAAU,CAAA;EAEvB,IAAIN,QAAQ,KAAK,KAAK,EAAE;IACtB,IAAIE,IAAI,CAACK,UAAU,EAAE;MACnBL,IAAI,CAACM,YAAY,CAACJ,KAAK,EAAEF,IAAI,CAACK,UAAU,CAAC,CAAA;AAC3C,KAAC,MAAM;AACLL,MAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;AACzB,KAAA;AACF,GAAC,MAAM;AACLF,IAAAA,IAAI,CAACO,WAAW,CAACL,KAAK,CAAC,CAAA;AACzB,GAAA;EAEA,IAAIA,KAAK,CAACM,UAAU,EAAE;AACpBN,IAAAA,KAAK,CAACM,UAAU,CAACC,OAAO,GAAGb,GAAG,CAAA;AAChC,GAAC,MAAM;IACLM,KAAK,CAACK,WAAW,CAACR,QAAQ,CAACW,cAAc,CAACd,GAAG,CAAC,CAAC,CAAA;AACjD,GAAA;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBA;AACA;;AAEO,IAAMe,eAAe,GAC1B,gFAAgF,CAAA;;AAIlF;AACA;AACA;AACA;AACA;AACO,SAASC,oBAAoBA,CAACC,IAAI,EAAE;AACzC,EAAA,IAAIC,SAAS,GAAGC,oBAAoB,CAACF,IAAI,CAAC,CAAA;AAE1C,EAAA,IAAIC,SAAS,EAAE;IACbA,SAAS,GAAAE,kBAAA,CAAO,IAAIC,GAAG,CAACH,SAAS,CAAC,CAAC,CAAC;;AAEpCA,IAAAA,SAAS,CAACI,OAAO,CAAC,UAAAC,KAAK,EAAI;AACzBN,MAAAA,IAAI,GAAGO,UAAU,CAACP,IAAI,EAAEM,KAAK,EAAEE,iBAAiB,CAAC,EAAE,EAAEF,KAAK,CAAC,CAAC,CAAA;AAC9D,KAAC,CAAC,CAAA;AACJ,GAAA;AAEA,EAAA,OAAON,IAAI,CAAA;AACb,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASO,UAAUA,CAACE,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAE;AACtC,EAAA,OAAOF,GAAG,CAACE,OAAO,CAAC,IAAIC,MAAM,CAACF,IAAI,EAAE,GAAG,CAAC,EAAEC,OAAO,CAAC,CAAA;AACpD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAST,oBAAoBA,CAACF,IAAI,EAAE;AAClC,EAAA,OAAOA,IAAI,CAACa,KAAK,CACf,mVACF,CAAC,CAAA;AACH,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,aAAaA,CAACR,KAAK,EAAE;AAAA,EAAA,IAAAS,qBAAA,CAAA;AACnC;AACA,EAAA,IAAMC,aAAa,GAAG9B,QAAQ,CAAC+B,aAAa,CAAC,iBAAiB,CAAC,CAAA;EAE/D,IAAI,CAACD,aAAa,EAAE;AAClB,IAAA,OAAOE,uBAAuB,CAACZ,KAAK,CAAA,QAAA,CAAO,CAAC,CAAA;AAC9C,GAAA;;AAEA;EACA,IAAMa,WAAW,GAAGH,aAAa,KAAbA,IAAAA,IAAAA,aAAa,gBAAAD,qBAAA,GAAbC,aAAa,CAAEI,UAAU,MAAA,IAAA,IAAAL,qBAAA,KAAzBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAA2BE,aAAa,CAAAI,WAAAA,CAAAA,MAAA,CAAYf,KAAK,CAACgB,IAAI,EAAA,mBAAA,CAAkB,CAAC,CAAA;EAErG,IAAI,CAACH,WAAW,EAAE;AAChB,IAAA,OAAOD,uBAAuB,CAACZ,KAAK,CAAA,QAAA,CAAO,CAAC,CAAA;AAC9C,GAAA;AAEA,EAAA,IAAMjB,KAAK,GAAGkB,UAAU,CAACY,WAAW,CAAC9B,KAAK,CAACO,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;AAE7D,EAAA,OAAOY,iBAAiB,CAACnB,KAAK,EAAEiB,KAAK,UAAO,CAAC,CAAA;AAC/C,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASE,iBAAiBA,CAACnB,KAAK,EAAEiB,KAAK,EAAE;EACvC,OAAAe,eAAAA,CAAAA,MAAA,CAAsBhC,KAAK,EAAAgC,yCAAAA,CAAAA,CAAAA,MAAA,CAAwCf,KAAK,EAAA,WAAA,CAAA,CAAAe,MAAA,CAAUvB,eAAe,EAAA,OAAA,CAAA,CAAA;AACnG,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASoB,uBAAuBA,CAACZ,KAAK,EAAE;EACtC,OAAAe,mFAAAA,CAAAA,MAAA,CAAyFf,KAAK,EAAA,SAAA,CAAA,CAAA;AAChG,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASiB,2BAA2BA,CAACC,IAAI,EAAE;AAChD,EAAA,IAAMC,SAAS,GAAGvC,QAAQ,CAACI,aAAa,CAAC,KAAK,CAAC,CAAA;EAC/CmC,SAAS,CAACC,SAAS,GAAGF,IAAI,CAAA;AAE1B,EAAA,IAAMG,MAAM,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACN,SAAS,CAACO,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;AAE5EL,EAAAA,MAAM,CAACtB,OAAO,CAAC,UAAA4B,KAAK,EAAI;AACtBR,IAAAA,SAAS,CAACC,SAAS,GAAGD,SAAS,CAACC,SAAS,CAACf,OAAO,CAC/CsB,KAAK,CAACC,SAAS,EACfD,KAAK,CAACE,OAAO,CAAC7B,KAChB,CAAC,CAAA;AACH,GAAC,CAAC,CAAA;EAEF,OAAOmB,SAAS,CAACC,SAAS,CAAA;AAC5B;;AClHA;;AAQA;AACA;AACA;AACA;AACO,SAASU,UAAUA,CAACC,KAAK,EAAE;AAChC,EAAA,IAAMC,YAAY,GAAGC,MAAM,CAACC,YAAY,EAAE,CAAA;EAE1C,IAAIF,YAAY,KAAK,IAAI,EAAE;AACzB,IAAA,OAAA;AACF,GAAA;AAEA,EAAA,IAAIb,SAAS,GAAGvC,QAAQ,CAACI,aAAa,CAAC,KAAK,CAAC,CAAA;AAE7C,EAAA,KAAK,IAAImD,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAGJ,YAAY,CAACK,UAAU,EAAEF,CAAC,GAAGC,GAAG,EAAE,EAAED,CAAC,EAAE;AAC3DhB,IAAAA,SAAS,CAAC/B,WAAW,CAAC4C,YAAY,CAACM,UAAU,CAACH,CAAC,CAAC,CAACI,aAAa,EAAE,CAAC,CAAA;AACnE,GAAA;AAEApB,EAAAA,SAAS,GAAGqB,oBAAoB,CAACrB,SAAS,CAAC,CAAA;EAE3CY,KAAK,CAACU,aAAa,CAACC,OAAO,CAAC,MAAM,EAAEvB,SAAS,CAACwB,SAAS,CAAC,CAAA;EACxDZ,KAAK,CAACa,cAAc,EAAE,CAAA;AACxB,CAAA;;AAEA;AACA;AACA;AACA;AACO,SAASC,sBAAsBA,CAAC3B,IAAI,EAAE;AAC3C,EAAA,IAAI4B,GAAG,CAAA;AACP,EAAA,IAAIC,KAAK,CAAA;EACT,IAAId,MAAM,CAACC,YAAY,EAAE;AACvB;AACAY,IAAAA,GAAG,GAAGb,MAAM,CAACC,YAAY,EAAE,CAAA;IAE3B,IAAIY,GAAG,KAAK,IAAI,EAAE,OAAA;AAElB,IAAA,IAAIA,GAAG,CAACR,UAAU,IAAIQ,GAAG,CAACT,UAAU,EAAE;AACpCU,MAAAA,KAAK,GAAGD,GAAG,CAACR,UAAU,CAAC,CAAC,CAAC,CAAA;MACzBS,KAAK,CAACC,cAAc,EAAE,CAAA;;AAEtB;AACA;AACA,MAAA,IAAMC,EAAE,GAAGrE,QAAQ,CAACI,aAAa,CAAC,KAAK,CAAC,CAAA;MACxCiE,EAAE,CAAC7B,SAAS,GAAGF,IAAI,CAAA;AACnB,MAAA,IAAMgC,IAAI,GAAGtE,QAAQ,CAACuE,sBAAsB,EAAE,CAAA;AAC9C,MAAA,IAAIC,IAAI,CAAA;AACR,MAAA,IAAIC,QAAQ,CAAA;AACZ,MAAA,OAAQD,IAAI,GAAGH,EAAE,CAAC/D,UAAU,EAAG;AAC7BmE,QAAAA,QAAQ,GAAGH,IAAI,CAAC9D,WAAW,CAACgE,IAAI,CAAC,CAAA;AACnC,OAAA;AACAL,MAAAA,KAAK,CAACO,UAAU,CAACJ,IAAI,CAAC,CAAA;;AAEtB;AACA,MAAA,IAAIG,QAAQ,EAAE;AACZN,QAAAA,KAAK,GAAGA,KAAK,CAACQ,UAAU,EAAE,CAAA;AAC1BR,QAAAA,KAAK,CAACS,aAAa,CAACH,QAAQ,CAAC,CAAA;AAC7BN,QAAAA,KAAK,CAACU,QAAQ,CAAC,IAAI,CAAC,CAAA;QACpBX,GAAG,CAACY,eAAe,EAAE,CAAA;AACrBZ,QAAAA,GAAG,CAACa,QAAQ,CAACZ,KAAK,CAAC,CAAA;AACrB,OAAA;AACF,KAAA;AACF,GAAA;AACF,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASP,oBAAoBA,CAACrB,SAAS,EAAE;AACvC,EAAA,IAAME,MAAM,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACN,SAAS,CAACO,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAA;AAE5EL,EAAAA,MAAM,CAACtB,OAAO,CAAC,UAAC4B,KAAK,EAAK;AACxBA,IAAAA,KAAK,CAACC,SAAS,GAAGD,KAAK,CAACE,OAAO,CAAC7B,KAAK,CAAA;AACvC,GAAC,CAAC,CAAA;AAEF,EAAA,OAAOmB,SAAS,CAAA;AAClB,CAAA;;AAiEA;AACA;AACA;AACA;AACA;AACO,SAASyC,eAAeA,CAAAC,KAAA,EAAiB;AAAA,EAAA,IAAdnE,IAAI,GAAAmE,KAAA,CAAJnE,IAAI;IAAEwB,IAAI,GAAA2C,KAAA,CAAJ3C,IAAI,CAAA;AAC1C,EAAA,IAAM4C,SAAS,GAAGpE,IAAI,CAACqE,MAAM,CAAA;AAC7B,EAAA,IAAMC,WAAW,GAAG,CAAC9C,IAAI,CAACX,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,EAAEwD,MAAM,CAAA;EAEtD,OAAOD,SAAS,GAAGE,WAAW,CAAA;AAChC,CAAA;AAsDA;AACA;AACA;AACA;AACA;AACO,SAASC,kBAAkBA,CAACC,QAAQ,EAAE;AAC3C,EAAA,IAAMC,IAAI,GAAGD,QAAQ,CAAC9C,SAAS,CAACf,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;EAChE,IAAM+D,QAAQ,GAAGD,IAAI,CAAC9D,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;EAC9C,IAAMgE,MAAK,GAAGD,QAAQ,CAAC/D,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;AACpD,EAAA,OAAOgE,MAAK,CAAA;AACd,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,mBAAiBA,CAACvB,KAAK,EAAE;AACvC,EAAA,IAAIK,IAAI,GAAGL,KAAK,CAACwB,cAAc,CAAA;AAC/B,EAAA,IAAIC,MAAM,GAAGzB,KAAK,CAAC0B,WAAW,CAAA;;AAE9B;AACA,EAAA,IAAIrB,IAAI,CAACsB,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;AACpC,IAAA,OAAOxB,IAAI,CAACsB,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;MACvCxB,IAAI,GAAGA,IAAI,CAACyB,WAAW,CAAA;MACvB,IAAI,CAACzB,IAAI,EAAE,MAAA;AACb,KAAA;IACA,IAAI,CAACA,IAAI,EAAE;MACTA,IAAI,GAAGL,KAAK,CAAC+B,uBAAuB,CAAA;AACpC,MAAA,OAAO1B,IAAI,CAACsB,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;QACvCxB,IAAI,GAAGA,IAAI,CAAClE,UAAU,CAAA;AACxB,OAAA;AACF,KAAA;AACAsF,IAAAA,MAAM,GAAG,CAAC,CAAA;AACZ,GAAA;EAEA,OAAO;AAAEpB,IAAAA,IAAI,EAAJA,IAAI;AAAEoB,IAAAA,MAAM,EAANA,MAAAA;GAAQ,CAAA;AACzB,CAAA;;AAEA;AACA;AACA;AACA;AACO,SAASO,SAASA,GAAG;AAC1B,EAAA,IAAMC,SAAS,GAAG/C,MAAM,CAACC,YAAY,EAAE,CAAA;AACvC,EAAA,IAAMa,KAAK,GAAGiC,SAAS,CAAC1C,UAAU,CAAC,CAAC,CAAC,CAAA;AACrC,EAAA,IAAM2C,cAAc,GAAGX,mBAAiB,CAACvB,KAAK,CAAC,CAAA;EAE/C,OAAQ;AAACiC,IAAAA,SAAS,EAATA,SAAS;AAAEjC,IAAAA,KAAK,EAALA,KAAK;AAAEkC,IAAAA,cAAc,EAAdA,cAAAA;GAAe,CAAA;AAC5C,CAAA;;AAEA;AACA;AACA;AACO,SAASC,YAAYA,GAAG;AAC7B,EAAA,IAAAC,UAAA,GAA6CJ,SAAS,EAAE;IAAhDC,SAAS,GAAAG,UAAA,CAATH,SAAS;IAAEjC,KAAK,GAAAoC,UAAA,CAALpC,KAAK;IAAEkC,cAAc,GAAAE,UAAA,CAAdF,cAAc,CAAA;;AAExC;AACA,EAAA,IACED,SAAS,CAACI,WAAW,IACrBH,cAAc,CAACT,MAAM,KAAKS,cAAc,CAAC7B,IAAI,CAACiC,WAAW,CAACtB,MAAM,EAChE;AACA,IAAA,IAAMuB,EAAE,GAAG1G,QAAQ,CAACI,aAAa,CAAC,IAAI,CAAC,CAAA;AACvC+D,IAAAA,KAAK,CAACO,UAAU,CAACgC,EAAE,CAAC,CAAA;AACpBvC,IAAAA,KAAK,CAACS,aAAa,CAAC8B,EAAE,CAAC,CAAA;AACvBvC,IAAAA,KAAK,CAACwC,WAAW,CAACD,EAAE,CAAC,CAAA;IACrBN,SAAS,CAACtB,eAAe,EAAE,CAAA;AAC3BsB,IAAAA,SAAS,CAACrB,QAAQ,CAACZ,KAAK,CAAC,CAAA;AAEzB,IAAA,IAAMyC,GAAG,GAAG5G,QAAQ,CAACI,aAAa,CAAC,IAAI,CAAC,CAAA;AACxC+D,IAAAA,KAAK,CAACO,UAAU,CAACkC,GAAG,CAAC,CAAA;AACrBzC,IAAAA,KAAK,CAACS,aAAa,CAACgC,GAAG,CAAC,CAAA;AACxBzC,IAAAA,KAAK,CAACwC,WAAW,CAACC,GAAG,CAAC,CAAA;IACtBR,SAAS,CAACtB,eAAe,EAAE,CAAA;AAC3BsB,IAAAA,SAAS,CAACrB,QAAQ,CAACZ,KAAK,CAAC,CAAA;AAC3B,GAAC,MAAM;AACL,IAAA,IAAMuC,GAAE,GAAG1G,QAAQ,CAACI,aAAa,CAAC,IAAI,CAAC,CAAA;AACvC+D,IAAAA,KAAK,CAACO,UAAU,CAACgC,GAAE,CAAC,CAAA;AACpBvC,IAAAA,KAAK,CAACS,aAAa,CAAC8B,GAAE,CAAC,CAAA;AACvBvC,IAAAA,KAAK,CAACwC,WAAW,CAACD,GAAE,CAAC,CAAA;IACrBN,SAAS,CAACtB,eAAe,EAAE,CAAA;AAC3BsB,IAAAA,SAAS,CAACrB,QAAQ,CAACZ,KAAK,CAAC,CAAA;AACzB;AACA,IAAA,IACEkC,cAAc,CAAC7B,IAAI,CAACyB,WAAW,IAC/BI,cAAc,CAAC7B,IAAI,CAACyB,WAAW,CAACH,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAC3D;MACA7B,KAAK,CAAC0C,QAAQ,CAACR,cAAc,CAAC7B,IAAI,CAACyB,WAAW,EAAE,CAAC,CAAC,CAAA;MAClD9B,KAAK,CAAC2C,MAAM,CAACT,cAAc,CAAC7B,IAAI,CAACyB,WAAW,EAAE,CAAC,CAAC,CAAA;AAClD,KAAA;IACAG,SAAS,CAACtB,eAAe,EAAE,CAAA;AAC3BsB,IAAAA,SAAS,CAACrB,QAAQ,CAACZ,KAAK,CAAC,CAAA;AAC3B,GAAA;AACF;;ACnTA;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACO,SAAS4C,WAAWA,CAACC,YAAY,EAAE;AACxC;AACA,EAAA,IAAMC,cAAc,GAAGC,YAAM,CAAC,EAAE,CAAC,CAAA;AAEjC,EAAA,IAAMC,gBAAgB,GAAGD,YAAM,CAAC,EAAE,CAAC,CAAA;;AAEnC;AACA,EAAA,IAAME,aAAa,GAAGC,iBAAW,CAAC,UAAAC,EAAE,EAAI;AACtCL,IAAAA,cAAc,CAACM,OAAO,CAACC,IAAI,CAACF,EAAE,CAAC,CAAA;GAChC,EAAE,EAAE,CAAC,CAAA;;AAEN;AACA,EAAA,IAAMG,QAAQ,GAAGJ,iBAAW,CAAC,UAAA/E,IAAI,EAAI;AACnC,IAAA,IAAIoF,MAAM,GAAGT,cAAc,CAACM,OAAO,CAACI,MAAM,CAAC,UAACC,GAAG,EAAEN,EAAE,EAAK;MACtD,OAAOA,EAAE,CAACM,GAAG,CAAC,CAAA;KACf,EAAEtF,IAAI,CAAC,CAAA;AAERoF,IAAAA,MAAM,GAAGG,sBAAsB,CAACH,MAAM,EAAEV,YAAY,CAAC,CAAA;IAErDG,gBAAgB,CAACI,OAAO,GAAGG,MAAM,CAAA;AAEjC,IAAA,OAAOA,MAAM,CAAA;GACd,EAAE,EAAE,CAAC,CAAA;EAEN,OAAO;AAAEN,IAAAA,aAAa,EAAbA,aAAa;AAAEK,IAAAA,QAAQ,EAARA,QAAQ;AAAEN,IAAAA,gBAAgB,EAAhBA,gBAAAA;GAAkB,CAAA;AACtD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASU,sBAAsBA,CAACvF,IAAI,EAAE0E,YAAY,EAAE;AACzD,EAAA,IAAMzE,SAAS,GAAGvC,QAAQ,CAACI,aAAa,CAAC,KAAK,CAAC,CAAA;EAC/CmC,SAAS,CAACC,SAAS,GAAGF,IAAI,CAAA;AAC1B,EAAA,IAAIxB,IAAI,CAAA;AACR,EAAA,IAAGkG,YAAY,EAAE;AACflG,IAAAA,IAAI,GAAGuE,kBAAkB,CAAC9C,SAAS,CAAC,CAAA;AACtC,GAAC,MAAM;AACLzB,IAAAA,IAAI,GAAGyB,SAAS,CAACwB,SAAS,IAAI,EAAE,CAAA;AAClC,GAAA;;AAEA;EACAjD,IAAI,GAAGA,IAAI,CAACW,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAA;AAE/B,EAAA,OAAOX,IAAI,CAAA;AACb;;AC5DA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACO,SAASgH,SAASA,CAAAC,IAAA,EAA8C;AAAA,EAAA,IAA3CjI,GAAG,GAAAiI,IAAA,CAAHjI,GAAG;IAAEkI,YAAY,GAAAD,IAAA,CAAZC,YAAY;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;IAAEC,UAAU,GAAAH,IAAA,CAAVG,UAAU,CAAA;AACjE,EAAA,IAAAC,YAAA,GAAuCpB,WAAW,CAAC,KAAK,CAAC;IAAjDU,QAAQ,GAAAU,YAAA,CAARV,QAAQ;IAAEN,gBAAgB,GAAAgB,YAAA,CAAhBhB,gBAAgB,CAAA;EAElCiB,yBAAmB,CAACtI,GAAG,EAAE,YAAA;IAAA,OAAO;MAC9B,IAAIuI,KAAKA,GAAG;QACV,OAAOlB,gBAAgB,CAACI,OAAO,CAAA;OAChC;MACD,IAAIc,KAAKA,CAACA,KAAK,EAAE;QACfJ,QAAQ,CAACI,KAAK,CAAC,CAAA;OAChB;MACDC,KAAK,EAAE,SAAAA,KAAAA,GAAM;AACX,QAAA,IAAIN,YAAY,CAACT,OAAO,KAAK,IAAI,EAAE,OAAA;AACnCS,QAAAA,YAAY,CAACT,OAAO,CAACe,KAAK,EAAE,CAAA;OAC7B;MACDC,IAAI,EAAE,SAAAA,IAAAA,GAAM;AACV,QAAA,IAAIP,YAAY,CAACT,OAAO,KAAK,IAAI,EAAE;AACjCE,UAAAA,QAAQ,CAACO,YAAY,CAACT,OAAO,CAACjF,IAAI,CAAC,CAAA;AAErC,SAAA;AAEA4F,QAAAA,UAAU,EAAE,CAAA;AACd,OAAA;KACD,CAAA;AAAA,GAAC,CAAC,CAAA;AACL;;ACxCA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASM,OAAOA,CAACR,YAAY,EAAES,QAAQ,EAAEC,QAAQ,EAAE;AACxD;AACA,EAAA,IAAMC,cAAc,GAAGzB,YAAM,CAAC,IAAI,CAAC,CAAA;AACnC,EAAA,IAAM0B,UAAU,GAAG1B,YAAM,CAACwB,QAAQ,CAAC,CAAA;AAEnC,EAAA,IAAMG,kBAAkB,GAAGxB,iBAAW,CAAC,YAAM;AAC3C,IAAA,IAAIW,YAAY,CAACT,OAAO,KAAK,IAAI,EAAE;AACjC,MAAA,IAAMuB,WAAW,GAAGH,cAAc,CAACpB,OAAO,CAAA;AAE1C,MAAA,IAAMwB,QAAQ,GAAGf,YAAY,CAACT,OAAO,CAACyB,IAAI,CAAA;MAE1C,IACE,CAAC,CAACF,WAAW,IACXA,WAAW,CAACG,KAAK,KAAKF,QAAQ,CAACE,KAAK,IACpCH,WAAW,CAACI,MAAM,KAAKH,QAAQ,CAACG,MAAM,KACxC,OAAOT,QAAQ,KAAK,UAAU,EAC9B;QACAA,QAAQ,CAACM,QAAQ,CAAC,CAAA;AACpB,OAAA;MAEAJ,cAAc,CAACpB,OAAO,GAAGwB,QAAQ,CAAA;AACnC,KAAA;AACF,GAAC,EAAE,CAACN,QAAQ,EAAET,YAAY,CAAC,CAAC,CAAA;AAE5B,EAAA,IAAME,UAAU,GAAGb,iBAAW,CAAC,UAAC8B,aAAa,EAAK;AAChD,IAAA,IAAI,OAAOP,UAAU,CAACrB,OAAO,KAAK,UAAU,EAAE;AAC5CqB,MAAAA,UAAU,CAACrB,OAAO,CAAC4B,aAAa,CAAC,CAAA;AACnC,KAAA;AAEA,IAAA,IAAI,OAAOV,QAAQ,KAAK,UAAU,EAAE;AAClCI,MAAAA,kBAAkB,EAAE,CAAA;AACtB,KAAA;AACF,GAAC,EAAE,CAACA,kBAAkB,EAAEJ,QAAQ,CAAC,CAAC,CAAA;AAElCW,EAAAA,eAAS,CAAC,YAAM;IACd,IAAIpB,YAAY,CAACT,OAAO,EAAE;AACxBsB,MAAAA,kBAAkB,EAAE,CAAA;AACtB,KAAA;AACF,GAAC,EAAE,CAACA,kBAAkB,EAAEb,YAAY,CAAC,CAAC,CAAA;AAEtC,EAAA,OAAOE,UAAU,CAAA;AACnB;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAMmB,SAAS,GAAG,SAAZA,SAASA,CAAAtB,IAAA,EAEbjI,GAAG,EACA;AAAA,EAAA,IAFDwJ,WAAW,GAAAvB,IAAA,CAAXuB,WAAW;IAAEnJ,KAAK,GAAA4H,IAAA,CAAL5H,KAAK;IAAEoJ,QAAQ,GAAAxB,IAAA,CAARwB,QAAQ;IAAEC,SAAS,GAAAzB,IAAA,CAATyB,SAAS;IAAEd,QAAQ,GAAAX,IAAA,CAARW,QAAQ;AAAKe,IAAAA,KAAK,GAAAC,wBAAA,CAAA3B,IAAA,EAAA4B,SAAA,CAAA,CAAA;EAG7DvB,yBAAmB,CAACtI,GAAG,EAAE,YAAA;IAAA,OAAO;AAC9B8J,MAAAA,aAAa,EAAE,SAAAA,aAAAtH,CAAAA,IAAI,EAAI;QACrB,IAAI0F,YAAY,CAACT,OAAO,EAAE;AACxBS,UAAAA,YAAY,CAACT,OAAO,CAACe,KAAK,EAAE,CAAA;AAC9B,SAAA;QAEArE,sBAAsB,CAAC3B,IAAI,CAAC,CAAA;QAE5B,IAAI0F,YAAY,CAACT,OAAO,EAAE;AACxBS,UAAAA,YAAY,CAACT,OAAO,CAACe,KAAK,EAAE,CAAA;AAC9B,SAAA;AAEA,QAAA,IAAIN,YAAY,CAACT,OAAO,IAAIsC,cAAc,CAACtC,OAAO,IAAIlF,2BAA2B,CAAC2F,YAAY,CAACT,OAAO,CAAC/E,SAAS,CAAC,KAAK,EAAE,EAAE;AACxHqH,UAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,SAAS,CAAA;AACrD,SAAC,MAAM,IAAID,cAAc,CAACtC,OAAO,EAAE;AACjCsC,UAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,QAAQ,CAAA;AACpD,SAAA;QAEA,IAAI9B,YAAY,CAACT,OAAO,IAAI,OAAOmB,QAAQ,KAAK,UAAU,EAAE;AAC1DA,UAAAA,QAAQ,CAACV,YAAY,CAACT,OAAO,CAAC/E,SAAS,CAAC,CAAA;AAC1C,SAAA;OACD;MACD,IAAIF,IAAIA,CAAC+F,KAAK,EAAE;QACd,IAAIL,YAAY,CAACT,OAAO,EAAE;AACxBS,UAAAA,YAAY,CAACT,OAAO,CAAC/E,SAAS,GAAG6F,KAAK,CAAA;AACxC,SAAA;QAEA,IAAIwB,cAAc,CAACtC,OAAO,EAAE;AAC1B,UAAA,IAAMzG,IAAI,GAAGuB,2BAA2B,CAACgG,KAAK,CAAC,CAAA;UAC/C,IAAIvH,IAAI,KAAK,EAAE,EAAE;AACf+I,YAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,SAAS,CAAA;AACrD,WAAC,MAAM;AACLD,YAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,QAAQ,CAAA;AACpD,WAAA;AACF,SAAA;QAEA,IAAI,OAAOpB,QAAQ,KAAK,UAAU,IAAIV,YAAY,CAACT,OAAO,EAAE;AAC1DmB,UAAAA,QAAQ,CAACV,YAAY,CAACT,OAAO,CAAC/E,SAAS,CAAC,CAAA;AAC1C,SAAA;OACD;MACD,IAAIF,IAAIA,GAAG;AACT,QAAA,IAAI,CAAC0F,YAAY,CAACT,OAAO,EAAE,OAAO,EAAE,CAAA;AAEpC,QAAA,OAAOS,YAAY,CAACT,OAAO,CAAC/E,SAAS,CAAA;OACtC;MACD,IAAI1B,IAAIA,GAAG;AACT,QAAA,IAAI,CAACkH,YAAY,CAACT,OAAO,EAAE,OAAO,EAAE,CAAA;AAEpC,QAAA,OAAOS,YAAY,CAACT,OAAO,CAACxD,SAAS,CAAA;OACtC;MACD,IAAIiF,IAAIA,GAAG;AACT,QAAA,IAAI,CAAChB,YAAY,CAACT,OAAO,EAAE;UACzB,OAAO;AACL0B,YAAAA,KAAK,EAAE,CAAC;AACRC,YAAAA,MAAM,EAAE,CAAA;WACT,CAAA;AACH,SAAA;QAEA,OAAO;AACLD,UAAAA,KAAK,EAAEjB,YAAY,CAACT,OAAO,CAACwC,WAAW;AACvCb,UAAAA,MAAM,EAAElB,YAAY,CAACT,OAAO,CAACyC,YAAAA;SAC9B,CAAA;OACF;MACD1B,KAAK,EAAA,SAAAA,QAAG;AACN,QAAA,IAAI,CAACN,YAAY,CAACT,OAAO,EAAE,OAAA;AAE3BS,QAAAA,YAAY,CAACT,OAAO,CAACe,KAAK,EAAE,CAAA;AAC9B,OAAA;KACD,CAAA;AAAA,GAAC,CAAC,CAAA;;AAEH;AACA,EAAA,IAAMuB,cAAc,GAAG3C,YAAM,CAAC,IAAI,CAAC,CAAA;AACnC;AACA,EAAA,IAAMc,YAAY,GAAGd,YAAM,CAAC,IAAI,CAAC,CAAA;;AAEjC;AACF;AACA;AACA;EACE,SAAS+C,aAAaA,CAAC9G,KAAK,EAAE;IAC5B,IAAIA,KAAK,CAAC+G,GAAG,KAAK,OAAO,KAAK/G,KAAK,CAACgH,QAAQ,KAAK,IAAI,IAAIhH,KAAK,CAACiH,OAAO,KAAK,IAAI,CAAC,IAAIX,KAAK,CAACzC,YAAY,EAAE;MACtG7D,KAAK,CAACa,cAAc,EAAE,CAAA;MACtB,IAAGgE,YAAY,CAACT,OAAO,EAAE;AACvBjB,QAAAA,YAAY,EAAE,CAAA;AACd,QAAA,OAAA;AACF,OAAA;AACF,KAAA;AACA,IAAA,IAAInD,KAAK,CAAC+G,GAAG,KAAK,OAAO,EAAE;AACzBT,MAAAA,KAAK,CAACY,OAAO,CAAClH,KAAK,CAAC,CAAA;AACtB,KAAC,MAAM,IAAIA,KAAK,CAAC+G,GAAG,KAAK,SAAS,EAAE;AAClCT,MAAAA,KAAK,CAACa,SAAS,CAACnH,KAAK,CAAC,CAAA;AACxB,KAAC,MAAM,IAAIA,KAAK,CAAC+G,GAAG,KAAK,WAAW,EAAE;AACpCT,MAAAA,KAAK,CAACc,WAAW,CAACpH,KAAK,CAAC,CAAA;AAC1B,KAAC,MAAM;MACL,IAAIA,KAAK,CAAC+G,GAAG,CAAC/E,MAAM,KAAK,CAAC,IAAI0E,cAAc,CAACtC,OAAO,EAAE;AACpDsC,QAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,QAAQ,CAAA;AACpD,OAAA;AACF,KAAA;AAEAL,IAAAA,KAAK,CAACe,SAAS,CAACrH,KAAK,CAAC,CAAA;AACxB,GAAA;;AAEA;EACA,SAASsH,WAAWA,GAAG;IACrBhB,KAAK,CAACiB,OAAO,EAAE,CAAA;AACjB,GAAA;;AAEA;AACF;AACA;AACA;EACE,SAASC,WAAWA,CAACxH,KAAK,EAAE;AAC1BsG,IAAAA,KAAK,CAACmB,OAAO,CAACzH,KAAK,CAAC,CAAA;AAEpB,IAAA,IAAM0H,KAAK,GAAG7C,YAAY,CAACT,OAAO,CAAA;AAElC,IAAA,IAAIsC,cAAc,CAACtC,OAAO,IAAIsD,KAAK,EAAE;AACnC,MAAA,IAAM/J,IAAI,GAAGuB,2BAA2B,CAACwI,KAAK,CAACrI,SAAS,CAAC,CAAA;MACzD,IAAI1B,IAAI,KAAK,EAAE,EAAE;AACf+I,QAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,SAAS,CAAA;AACrD,OAAC,MAAM;AACLD,QAAAA,cAAc,CAACtC,OAAO,CAACpH,KAAK,CAAC2J,UAAU,GAAG,QAAQ,CAAA;AACpD,OAAA;AACF,KAAA;IAEA,IAAI,OAAOpB,QAAQ,KAAK,UAAU,IAAIV,YAAY,CAACT,OAAO,EAAE;AAC1DmB,MAAAA,QAAQ,CAACV,YAAY,CAACT,OAAO,CAAC/E,SAAS,CAAC,CAAA;AAC1C,KAAA;AACF,GAAA;EAEA,oBACEsI,yBAAA,CAAA1K,aAAA,CAAA,KAAA,EAAA;AAAKoJ,IAAAA,SAAS,EAAC,8BAA8B;AAACrJ,IAAAA,KAAK,EAAEA,KAAAA;GACnD2K,eAAAA,yBAAA,CAAA1K,aAAA,CAAA,KAAA,EAAA;AAAKoJ,IAAAA,SAAS,EAAC,4BAA4B;AAACuB,IAAAA,OAAO,EAAEN,WAAAA;GACnDK,eAAAA,yBAAA,CAAA1K,aAAA,CAAA,KAAA,EAAA;AAAKN,IAAAA,GAAG,EAAE+J,cAAe;AAACL,IAAAA,SAAS,EAAC,gCAAA;AAAgC,GAAA,EACjEF,WACE,CAAC,eACNwB,yBAAA,CAAA1K,aAAA,CAAA,KAAA,EAAA;AACEN,IAAAA,GAAG,EAAEkI,YAAa;AAClBwC,IAAAA,SAAS,EAAEP,aAAc;AACzBW,IAAAA,OAAO,EAAED,WAAY;AACrBpB,IAAAA,QAAQ,EAAEA,QAAS;IACnByB,eAAe,EAAA,IAAA;IACfxB,SAAS,EAAA,0BAAA,CAAArH,MAAA,CAA6BqH,SAAS,GAAA,GAAA,CAAArH,MAAA,CAAOqH,SAAS,CAAK,GAAA,EAAE,CACjE;IACLyB,MAAM,EAAExB,KAAK,CAACwB,MAAO;IACrBC,MAAM,EAAEzB,KAAK,CAACyB,MAAO;IACrBC,OAAO,EAAE1B,KAAK,CAAC0B,OAAQ;IACvB,aAAY,EAAA,0BAAA;GACb,CACE,CACF,CAAC,CAAA;AAEV,CAAC,CAAA;AAED,IAAMC,gBAAgB,gBAAGC,gBAAU,CAAChC,SAAS,CAAC;;ACjM9C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASiC,iBAAiBA,CAAAvD,IAAA,EAA6D;AAAA,EAAA,IAA1DwD,UAAU,GAAAxD,IAAA,CAAVwD,UAAU;IAAEC,gBAAgB,GAAAzD,IAAA,CAAhByD,gBAAgB;IAAEC,aAAa,GAAA1D,IAAA,CAAb0D,aAAa;IAAEC,SAAS,GAAA3D,IAAA,CAAT2D,SAAS,CAAA;AAEjF,EAAA,IAAMC,cAAc,GAAGzE,YAAM,CAAC,IAAI,CAAC,CAAA;AACnC,EAAA,IAAA0E,SAAA,GAA8DC,cAAQ,CAAC,KAAK,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAAtEI,IAAAA,uBAAuB,GAAAF,UAAA,CAAA,CAAA,CAAA;AAAEG,IAAAA,0BAA0B,GAAAH,UAAA,CAAA,CAAA,CAAA,CAAA;AAE1D1C,EAAAA,eAAS,CAAC,YAAM;AAAA,IAAA,IAAA8C,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,sBAAA,CAAA;AACd,IAAA,IAAI,CAAAH,CAAAA,qBAAA,GAACR,SAAS,aAATA,SAAS,KAAA,KAAA,CAAA,IAAA,CAAAS,kBAAA,GAATT,SAAS,CAAEnE,OAAO,MAAA4E,IAAAA,IAAAA,kBAAA,gBAAAA,kBAAA,GAAlBA,kBAAA,CAAoBG,UAAU,MAAA,IAAA,IAAAH,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA9BA,kBAAA,CAAgChH,MAAM,MAAA+G,IAAAA,IAAAA,qBAAA,cAAAA,qBAAA,GAAI,CAAC,IAAI,CAAC,EAAE;AACrDP,MAAAA,cAAc,CAACpE,OAAO,CAAC/G,WAAW,CAACkL,SAAS,CAACnE,OAAO,CAAC+E,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;MACnEL,0BAA0B,CAAC,IAAI,CAAC,CAAA;AAClC,KAAC,MAAM,IAAI,CAAAG,CAAAA,qBAAA,GAACX,aAAa,KAAbA,IAAAA,IAAAA,aAAa,KAAAY,KAAAA,CAAAA,IAAAA,CAAAA,sBAAA,GAAbZ,aAAa,CAAEa,UAAU,MAAAD,IAAAA,IAAAA,sBAAA,KAAzBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,sBAAA,CAA2BlH,MAAM,MAAAiH,IAAAA,IAAAA,qBAAA,KAAAA,KAAAA,CAAAA,GAAAA,qBAAA,GAAI,CAAC,IAAI,CAAC,EAAE;AACvDT,MAAAA,cAAc,CAACpE,OAAO,CAAC/G,WAAW,CAACiL,aAAa,KAAA,IAAA,IAAbA,aAAa,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAbA,aAAa,CAAEa,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;MAChEL,0BAA0B,CAAC,IAAI,CAAC,CAAA;AAClC,KAAA;GACD,EAAE,CAACR,aAAa,KAAbA,IAAAA,IAAAA,aAAa,uBAAbA,aAAa,CAAEa,UAAU,CAAC,CAAC,CAAA;EAE/B,oBACExB,yBAAA,CAAA1K,aAAA,CAAA,QAAA,EAAA;AACEN,IAAAA,GAAG,EAAE6L,cAAe;AACpBtL,IAAAA,IAAI,EAAC,QAAQ;IACbmJ,SAAS,EAAA,2BAAA,CAAArH,MAAA,CACPoJ,UAAU,GAAG,kCAAkC,GAAG,EAAE,CACnD;AACHR,IAAAA,OAAO,EAAES,gBAAAA;AAAiB,GAAA,EAEzB,CAACQ,uBAAuB,iBACvBlB,yBAAA,CAAA1K,aAAA,CAAA,KAAA,EAAA;AACEmM,IAAAA,KAAK,EAAC,4BAA4B;AAClCC,IAAAA,OAAO,EAAC,WAAW;AACnBvD,IAAAA,KAAK,EAAC,IAAI;AACVC,IAAAA,MAAM,EAAC,IAAI;AACXM,IAAAA,SAAS,EAAC,iCAAA;GAGVsB,eAAAA,yBAAA,CAAA1K,aAAA,CAAA,MAAA,EAAA;AAAMqM,IAAAA,CAAC,EAAC,+IAAA;AAA+I,GAAE,CAAC,eAE1J3B,yBAAA,CAAA1K,aAAA,CAAA,MAAA,EAAA;AAAMqM,IAAAA,CAAC,EAAC,0KAAA;GAA4K,CACjL,CAED,CAAC,CAAA;AAEb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}